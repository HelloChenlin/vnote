#### 记录
2018-5-23  v1.0



#### 账号打通 
##### 新版登录接口(带同花顺账号登录)----测试中
```
接口地址:https://trade.5ifund.com:9445/rs/loginservice/login/withoutmobile2
/withvalidate  
Post 方式  form表单提交  
rsLoginDto:{"thsUserId":"xxx","thsCookie":"xxx","operator":"xxxx"}  
key1:460005898026847   (写死)
key2:a63848a7eefb0579c55c944ac1773358 (写死)
```
结果 | Code | Msg  
- | :-: | -: 
校验未通过| 9999| 校验未通过
未绑定 | 9999 | 账号还未绑定，请前往绑定
 登录成功| 0000 | 登录成功

#####  爱基金账号和同花顺账号绑定
```
接口地址 ：https://trade.5ifund.com:8443/rs/bind/app/dobind/{userid}/result
post 方式 form表单提交  
key1:460005898026847   (写死)
key2:a63848a7eefb0579c55c944ac1773358 (写死)
key3:{userid}
key4:  登录后获取
key5:  登录后获取
pwd:xxx    （用户密码MD5后大写）
RsBindDTO：
{
  "custId": "100110009758",  
  "thsId": "414766901",
  "user":    (同花顺登录后cookie中的值) "MDpseWZfdGVzdDI4OjpOb25lOjUwMDo0MTU3NjY5MDE6NywxMTExMTExMTExMSw0MDs0NCwxMSw0MDs2LDEsNDA7NSwxLDQwOzEsMSw0MDsyLDEsNDA7MywxLDQwOzUsMSw0MDs4LDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxLDQwOjo6OjQxNDc2NjkwMToxNTIzNDM2NDIxOjo6MTUwNTczNDI2MDo0MDAzNzk6MDo0NDczMjJhYTViMmZmYjIxMmE4NWE3MmJkMTViOGU1NjQ6OjA",
  "ticket": "4fe3a561e2235b5e2fefdfd63f6660ab",(同花顺登录后cookie中的值)
  "sessionId": "1"
}
```

##### 根据爱基金查同花顺
```
接口地址：https://trade.5ifund.com:8443/rs/bind/app/querybindpwd/100000000004/
result?pwd=9CBF8A4DCB8E30682B927F352D6559A0
方式：post方式

绑定后
{
    "url": null,
    "code": "0000",
    "custId": null,
    "singleData": {
        "thsUserId": "9096391",
        "account": "xwr168",
        "sessionid": "4216d651eec7b41a9931275ca7182194d"
    },
    "listData": null,
    "message": null
}

未绑定
{
    "url": null,
    "code": "9997",
    "custId": null,
    "singleData": null,
    "listData": null,
    "message": "查询失败，绑定关系不存在!"
}

不存在的测试账户
{
    "url": null,
    "code": "9100",
    "custId": null,
    "singleData": null,
    "listData": null,
    "message": "系统内部错误,查询同花顺信息失败"
}

密码错误
{
    "url": null,
    "code": "2000",
    "custId": null,
    "singleData": null,
    "listData": null,
    "message": "密码输入错误，还可以输入4次!"
}
```



##### 检查爱基金与同花顺是否绑定 (也可以互查id)
```
接口地址：https://trade.5ifund.com:8443/rs/bind/app/checkbind/{userid}/result
post 方式 form表单提交  
RsBindDTO:{"thsId":"xxx"}  
key1:460005898026847   (写死)
key2:a63848a7eefb0579c55c944ac1773358 (写死)
key3:{userid}
key4:                        登录后获取
key5:                        登录后获取


{
    "url": null,
    "code": "0000",
    "custId": null,
    "singleData": {
        "CheckBind": {
            "isFundBindThs_fund": "100000000004",  你查询的爱基金账号
            "isThsBindFund_fund": "",              和同花顺绑定的爱基金账号
            "isThsBindFund_ths": "xxx",            你查询的同花顺账号
            "isFundBindThs": "1",                  爱基金账号查同花顺的标志1表示绑定
            "isFundBindThs_ths": "9096391",        和爱基金绑定的同花顺账号
            "isThsBindFund": "0"                   同花顺查爱基金绑定的账号
        }
    },
    "listData": null,
    "message": "查询绑定关系成功"
}
```



##### 获取Token(绑定成功后)
```
接口地址：https://trade.5ifund.com:9445/fundsaleboot/bind/querytoken
post方式：json格式
{
	"custId":"100000000151"
}
```

##### 获取token后查询爱基金信息
```
接口地址：https://trade.5ifund.com:9445/rs/bind/ths/queryinfo/100110011325
/result?token=628aaf716dd1d3373087ac14aaac13ff
get方式
```




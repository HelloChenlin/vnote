# 限流
#### 令牌桶算法 
```
应用：nginx
原理：限制入的速度
· 每秒会有 r 个令牌被放人桶内，也就是说 ， 会以 llr 秒的平均速率向桶中依次 放人令牌（比如每秒共放人 10 个令牌，那么每 0. 1 秒放人 1 个令牌）：
· 桶的容量是固定不变的，假设桶中最多只允许存放 b 个令牌，如果桶满了再放人令牌，则溢出（新添加的令牌被丢弃） ； 
· 当一个 n 字节的请求包到达时，将消耗 n 个令牌，然后再发送该数据包； 
· 若桶中的可用令牌数小于 n ，则该数据包将会被执行限流处理（被抛弃或缓存）。
```
#### 漏桶算法
```
应用：MQ
原理：限制出的速度
·可以以任意速率向桶中流人水滴； 
·桶的容量是固定不变的，如果桶满了则溢出（新流人的水滴被丢弃 
·按照固定的速率从桶中流出水滴。
```

#### 计数器算法
```
某一个 SKU 的限流规则为 10 秒 5000 次，
如果 1 0 秒之内这个 SKU 的抢购次数达到了 5000 次，则拒绝后续抢购请求， 
10 秒之后，限流逻辑可以对这个 SKU 的可抢购次数（计数器）进行重置，确保之前 没有抢购成功的用户可以继续正常参与抢购。
```

#### 队列算法
```
假设redis中排队了50个请求，当一个请求完成后，另一个请求才能进入到队列中
```
## redis命令
### 查询节点信息
```
redis-cli -p 6379 info replication
```

### 启动服务器
```
redis-server [配置文件]
redis-server --port [端口]
```

### 集群
```
cluster meet 127.0.0.1 6381
cluster info
redis-cli -h 127.0.0.1 -p 6379 cluster addslots {0..5461}
```

## redis数据结构和API
redis每种数据结构都会有自己底层的内部编码实现，而且是多种实现。
### 字符串
#### API
```
1. set
2. setnx 用于判断是否存在keu值，不存在返回0
3. exist
```
#### 内部编码
```
1. int 8个字节的长整型
2. embstr 小于等于39个字节的字符串
3. raw 大于39个字节的字符串
```
## 为什么
### 为什么用redis而不用mogon或者SSDB
```
1. IO多路复用，内存型数据库，访问速度快。类似于点赞。
2. 主从自动选举功能，哨兵。
3. 单线程避免了锁的问题
4. 有发布订阅模式，故障回复比较方便。
```

### 为什么redis要用单线程而不用多线程
```
1. 不用加锁，减少cpu上下文切换，对于服务端来说：锁和线程切换是`性能杀手`。
2. 单线程不会有线程安全问题。
3. 采用单一长连接，IO多路复用,能支持较大的客户端连接数.类似于NIO或者Dubbo的dubbo协议
4. 因为采用内存访问，所以速度够快，在够快的前提下不需要多线程。
```

### 为什么redis数据结构底层要有多种实现
```
1. 扩展性高，类似于接口。例如redis后面添加了quicklist。
2. 多种内部编码可以适用于不同的场景下。例如ziplist和linkedlist.
```